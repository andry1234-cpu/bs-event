<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="color-scheme" content="only light">
    <meta name="theme-color" content="#000000">
    <title>Bending Spoons - Internal Event</title>
    <link rel="icon" type="image/x-icon" href="https://bendingspoons.com/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="https://bendingspoons.com/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="https://bendingspoons.com/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="https://bendingspoons.com/favicon-16x16.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Welcome/Login Screen -->
    <div id="welcome-screen" class="welcome-screen">
        <div class="welcome-content">
            <svg class="welcome-logo" width="120" height="120" viewBox="0 0 146 78.8" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M106.6,19.4c-8.5,0-15.8,5.3-18.7,12.8L67.3,11.5c-15.4-15.4-40.4-15.4-55.7,0c-15.4,15.4-15.4,40.4,0,55.7
                    c7.7,7.7,17.8,11.5,27.9,11.5c10.1,0,20.2-3.8,27.9-11.5l0.5-0.5l-8.4-8.4l-0.5,0.5c-10.7,10.7-28.2,10.7-38.9,0
                    c-10.7-10.7-10.7-28.2,0-38.9c10.7-10.7,28.2-10.7,38.9,0l33.3,33.3l0.5,0.5c1.7,1.6,3.6,2.9,5.7,3.9c2.5,1.1,5.3,1.7,8.2,1.7
                    c11,0,20-9,20-20C126.6,28.3,117.6,19.4,106.6,19.4z M78.7,11.5c15.4-15.4,40.4-15.4,55.7,0C141.9,19,146,28.9,146,39.4
                    c0,10.5-4.1,20.4-11.5,27.9c-7.7,7.7-17.8,11.5-27.9,11.5s-20.2-3.8-27.9-11.5L58.1,46.6c-2.9,7.5-10.2,12.8-18.7,12.8
                    c-11,0-20-9-20-20c0-11,9-20,20-20c3.7,0,7.1,1,10.1,2.7c1.4,0.8,2.6,1.8,3.8,2.9l0.5,0.5l33.3,33.3c10.7,10.7,28.2,10.7,38.9,0
                    c5.2-5.2,8.1-12.1,8.1-19.4c0-7.3-2.9-14.3-8.1-19.4c-10.7-10.7-28.2-10.7-38.9,0l-0.5,0.5l-8.4-8.4L78.7,11.5z" 
                    fill="url(#gradient-welcome)"/>
                <defs>
                    <linearGradient id="gradient-welcome" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#8B5CF6;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#3B82F6;stop-opacity:1" />
                    </linearGradient>
                </defs>
            </svg>
            
            <h1 class="welcome-title">Bending Spoons</h1>
            <p class="welcome-subtitle">Internal Event</p>
            
            <div class="welcome-divider"></div>
            
            <p class="welcome-description">Accedi con il tuo account Google per partecipare all'evento</p>
            
            <button class="welcome-login-btn" onclick="signInWithGoogle()">
                <svg width="20" height="20" viewBox="0 0 48 48">
                    <path fill="#EA4335" d="M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"></path>
                    <path fill="#4285F4" d="M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"></path>
                    <path fill="#FBBC05" d="M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"></path>
                    <path fill="#34A853" d="M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"></path>
                    <path fill="none" d="M0 0h48v48H0z"></path>
                </svg>
                Accedi con Google
            </button>
            
            <p class="welcome-footer">Evento privato Â· Solo su invito</p>
        </div>
    </div>
    
    <!-- Page Loader -->
    <div id="page-loader" class="page-loader">
        <div class="loader-content">
            <svg class="logo-loader" width="80" height="80" viewBox="0 0 146 78.8" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M106.6,19.4c-8.5,0-15.8,5.3-18.7,12.8L67.3,11.5c-15.4-15.4-40.4-15.4-55.7,0c-15.4,15.4-15.4,40.4,0,55.7
                    c7.7,7.7,17.8,11.5,27.9,11.5c10.1,0,20.2-3.8,27.9-11.5l0.5-0.5l-8.4-8.4l-0.5,0.5c-10.7,10.7-28.2,10.7-38.9,0
                    c-10.7-10.7-10.7-28.2,0-38.9c10.7-10.7,28.2-10.7,38.9,0l33.3,33.3l0.5,0.5c1.7,1.6,3.6,2.9,5.7,3.9c2.5,1.1,5.3,1.7,8.2,1.7
                    c11,0,20-9,20-20C126.6,28.3,117.6,19.4,106.6,19.4z M78.7,11.5c15.4-15.4,40.4-15.4,55.7,0C141.9,19,146,28.9,146,39.4
                    c0,10.5-4.1,20.4-11.5,27.9c-7.7,7.7-17.8,11.5-27.9,11.5s-20.2-3.8-27.9-11.5L58.1,46.6c-2.9,7.5-10.2,12.8-18.7,12.8
                    c-11,0-20-9-20-20c0-11,9-20,20-20c3.7,0,7.1,1,10.1,2.7c1.4,0.8,2.6,1.8,3.8,2.9l0.5,0.5l33.3,33.3c10.7,10.7,28.2,10.7,38.9,0
                    c5.2-5.2,8.1-12.1,8.1-19.4c0-7.3-2.9-14.3-8.1-19.4c-10.7-10.7-28.2-10.7-38.9,0l-0.5,0.5l-8.4-8.4L78.7,11.5z" 
                    fill="url(#gradient)"/>
                <defs>
                    <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#8B5CF6;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#3B82F6;stop-opacity:1" />
                    </linearGradient>
                </defs>
            </svg>
            <p>Caricamento evento...</p>
        </div>
    </div>
    
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1>Bending Spoons</h1>
            <div class="user-info">
                <div class="user-menu">
                    <button id="username" class="username-display" style="display: none;">Non autenticato</button>
                    <div id="user-dropdown" class="user-dropdown">
                        <button onclick="signOutUser()" class="dropdown-item">
                            Logout
                        </button>
                    </div>
                </div>
                <button id="login-btn" class="login-btn" onclick="signInWithGoogle()" title="Login con Google" style="display: none;">
                    <svg width="18" height="18" viewBox="0 0 48 48"><path fill="#EA4335" d="M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"></path><path fill="#4285F4" d="M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"></path><path fill="#FBBC05" d="M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"></path><path fill="#34A853" d="M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"></path><path fill="none" d="M0 0h48v48H0z"></path></svg>
                    Login con Google
                </button>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Video Player Section -->
            <section class="player-section">
                <div class="player-container">
                    <!-- Video Player -->
                    <div id="castr-player">
                        <!-- Millicast WebRTC Player -->
                        <video 
                            id="millicast-video"
                            autoplay
                            muted
                            playsinline
                            controls>
                        </video>
                        
                        <div class="placeholder" id="placeholder">
                            <p>ðŸŽ¥ Player Video</p>
                            <small>Connessione Free Nationals...</small>
                        </div>
                        
                        <!-- Stream Metrics -->
                        <div id="stream-metrics" class="stream-metrics" style="display: none;">
                            <div class="metric">
                                <span class="metric-label">Latency</span>
                                <span class="metric-value" id="latency">-</span>
                            </div>
                            <div class="metric">
                                <span class="metric-label">Local Time</span>
                                <span class="metric-value" id="local-time">-</span>
                            </div>
                            <div class="metric">
                                <span class="metric-label">Stream Time</span>
                                <span class="metric-value" id="stream-time">-</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Reactions Overlay -->
                    <div class="reactions-overlay" id="reactions-overlay"></div>
                </div>

                <!-- Reactions Buttons -->
                <div class="reactions-bar">
                    <button class="reaction-btn" data-reaction="ðŸ‘" title="Like">
                        <svg width="32" height="32" viewBox="0 0 64 64" fill="none">
                            <defs>
                                <linearGradient id="grad-thumb" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style="stop-color:#8B5CF6;stop-opacity:1" />
                                    <stop offset="100%" style="stop-color:#3B82F6;stop-opacity:1" />
                                </linearGradient>
                            </defs>
                            <path d="M32 8c-2 0-4 1-5 3l-8 15h-6c-3 0-5 2-5 5v20c0 3 2 5 5 5h28c2 0 4-1 5-3l8-22c1-2 0-5-2-6-1-1-3-1-4 0l-6 4V14c0-3-2-6-5-6h-5zm0 4h5c1 0 1 1 1 2v18l10-7 1 2-9 24H13V31h8l9-17c0-1 1-2 2-2z" fill="url(#grad-thumb)"/>
                        </svg>
                    </button>
                    <button class="reaction-btn" data-reaction="â¤ï¸" title="Love">
                        <svg width="32" height="32" viewBox="0 0 64 64" fill="none">
                            <defs>
                                <linearGradient id="grad-heart" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style="stop-color:#EC4899;stop-opacity:1" />
                                    <stop offset="100%" style="stop-color:#EF4444;stop-opacity:1" />
                                </linearGradient>
                            </defs>
                            <path d="M32 54L12 34c-4-4-4-10 0-14 4-4 10-4 14 0l6 6 6-6c4-4 10-4 14 0 4 4 4 10 0 14L32 54z" fill="url(#grad-heart)"/>
                        </svg>
                    </button>
                    <button class="reaction-btn" data-reaction="ðŸ˜‚" title="Haha">
                        <svg width="32" height="32" viewBox="0 0 64 64" fill="none">
                            <defs>
                                <linearGradient id="grad-laugh" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style="stop-color:#FBBF24;stop-opacity:1" />
                                    <stop offset="100%" style="stop-color:#F59E0B;stop-opacity:1" />
                                </linearGradient>
                            </defs>
                            <circle cx="32" cy="32" r="28" fill="url(#grad-laugh)"/>
                            <path d="M20 28c0-2 1-3 3-3s3 1 3 3-1 3-3 3-3-1-3-3zm18 0c0-2 1-3 3-3s3 1 3 3-1 3-3 3-3-1-3-3z" fill="#1F2937"/>
                            <path d="M18 38c0-8 6-14 14-14s14 6 14 14" stroke="#1F2937" stroke-width="3" stroke-linecap="round" fill="none"/>
                            <path d="M18 20c2-1 4-2 6-2m22 2c-2-1-4-2-6-2" stroke="#1F2937" stroke-width="2.5" stroke-linecap="round"/>
                        </svg>
                    </button>
                    <button class="reaction-btn" data-reaction="ðŸŽ‰" title="Celebrate">
                        <svg width="32" height="32" viewBox="0 0 64 64" fill="none">
                            <defs>
                                <linearGradient id="grad-party" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style="stop-color:#8B5CF6;stop-opacity:1" />
                                    <stop offset="100%" style="stop-color:#3B82F6;stop-opacity:1" />
                                </linearGradient>
                            </defs>
                            <path d="M32 8L36 20 48 16 40 28 52 32 40 36 48 48 36 44 32 56 28 44 16 48 24 36 12 32 24 28 16 16 28 20z" fill="url(#grad-party)"/>
                            <circle cx="12" cy="12" r="2" fill="#FBBF24"/>
                            <circle cx="52" cy="12" r="2" fill="#EC4899"/>
                            <circle cx="12" cy="52" r="2" fill="#3B82F6"/>
                            <circle cx="52" cy="52" r="2" fill="#10B981"/>
                        </svg>
                    </button>
                    <button class="reaction-btn" data-reaction="ðŸ‘" title="Clap">
                        <svg width="32" height="32" viewBox="0 0 64 64" fill="none">
                            <defs>
                                <linearGradient id="grad-clap" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style="stop-color:#FBBF24;stop-opacity:1" />
                                    <stop offset="100%" style="stop-color:#F59E0B;stop-opacity:1" />
                                </linearGradient>
                            </defs>
                            <path d="M28 14c0-1 1-2 2-2s2 1 2 2v16h-4V14zm-8 8c0-1 1-2 2-2s2 1 2 2v8h-4v-8zm16 0c0-1 1-2 2-2s2 1 2 2v8h-4v-8zm8 4c0-1 1-2 2-2s2 1 2 2v4h-4v-4z" fill="url(#grad-clap)"/>
                            <rect x="16" y="32" width="32" height="20" rx="4" fill="url(#grad-clap)"/>
                            <path d="M12 28l4 4m36-4l-4 4M32 8v4m-12-8l2 4m20-4l-2 4" stroke="#F59E0B" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                    </button>
                </div>
            </section>

            <!-- Chat Section -->
            <section class="chat-section">
                <div class="chat-header">
                    <h2>ðŸ’¬ Chat</h2>
                    <span class="online-count">
                        <span class="status-dot"></span>
                        <span id="online-users">1</span> online
                    </span>
                </div>
                
                <div class="chat-messages" id="chat-messages">
                    <!-- Messages will appear here -->
                    <div class="system-message">
                        Benvenuto! La chat Ã¨ pronta per l'evento.
                    </div>
                </div>
                
                <div class="chat-input-container">
                    <button id="photo-btn" class="photo-btn" title="Invia foto">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                            <circle cx="8.5" cy="8.5" r="1.5"/>
                            <polyline points="21 15 16 10 5 21"/>
                        </svg>
                    </button>
                    <input 
                        type="text" 
                        id="chat-input" 
                        placeholder="Scrivi un messaggio..."
                        maxlength="500"
                    />
                    <button id="send-btn" class="send-btn">Invia</button>
                </div>
            </section>
        </main>
    </div>

    <!-- Millicast SDK -->
    <script src="https://cdn.jsdelivr.net/npm/@millicast/sdk@latest/dist/millicast.umd.js"></script>
    <!-- Firebase SDK -->
    <script type="module" src="app.js"></script>
</body>
</html>
